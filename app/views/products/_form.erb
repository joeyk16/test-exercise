<div class="container">
  <div class=“row”>
    <div class="col-md-6 col-md-offset-3">
      <div class="panel panel-primary">
        <div class="panel-body">
          <h3><%= root_category.name %></h3>

          <%= simple_nested_form_for product do |f| %>
            <%= f.collection_select :category_id, root_category.children, :id, :name, include_blank: true, prompt: "Select One Category" %>
​
            <%= f.simple_fields_for :product_sizes do |psf| %>
              <% ps = psf.object %>
        ​
              <%= psf.input :quantity, label: "Quantity for size #{ps.size} for category #{ps.size.category}" %>
              <%= psf.hidden_field :size_id, value: ps.size_id %>
            <% end %>

            <hr>
            <%= f.input :title, label:"Title"%>
            <%= f.input :price, label:"Price"%>
            <%= f.input :description,label:"Description" %>
            <%= f.input :size_description, label:"Size Details"%>
            <%= f.input :shipping_description, label:"Shipping Details"%>
            <%= f.input :tag_list,label:"Tags - Seperate tags using comma ','. 5 tags allowed per product" %>

            <p><%= f.link_to_add "Add a image", :product_images, :data => { :product_image => "#product_images" } %></p>

            <%= f.fields_for :product_images do |product_image| %>
              <% if product_image.object.new_record? %>
                <%= product_image.file_field(:product_image) %>
                <%= product_image.link_to_remove "Remove Image", data: { confirm: "Are you sure you want to delete this image?" } %>
              <% else %>
                <%= product_image.hidden_field :_destroy %>
              <% end %>
            <% end %>
​
            <%= f.button :submit, "Create new product", class: "btn-lg btn-success" %>

          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
​
